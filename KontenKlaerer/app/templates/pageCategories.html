{% extends 'base.html' %}q

{% block content %}
<!-- headline box-->
<div class="content-box p1 m2b">
    <h1>Kategorien verwalten</h1>
</div>

<!-- frame for income/expense boxes-->
<div class="flex-row m2b">
    <!-- left box income-->
    <div class="content-box flex-grow p1 m1r">
    <!-- headline-->
        <h2>Einnahmen</h2>
       <!-- insert form-->
        <form method="post">
            {% csrf_token %}
            <div><h4>Neue Einnahmen-Kategorie anlegen</h4></div>
            <div class="flex-column inputform m2b">
                <div class="flex-row center-h m1r p1">                
                   <div class="m1r"><label for="name">Name</label></div> 
                   <div class="align-right"> <input type="text" name="name_income" placeholder="Name" required></div>
                </div>
                <div class="flex-row center-h m1r p1">
                   <div class="m1r"> <label for="parent">Überkategorie</label></div>
                   <div class="align-right"> <select name="parent" required>
                        <option value="0">Keine</option>
                        {% for category in categories_income_select %}
                        <option value="{{category.id}}">{{category.name}}</option>
                        {% endfor %}
                        </select></div>
                </div>
                <div class="flex-row center-h m1r p1">
                   <div class="m1r"> <label for="ignore">In Statistik ignorieren</label></div>
                   <div class="align-right"> 
                        <input type="checkbox" name="ignore">
                    </div>
                </div>
                <div class="p1 align-right">
                    <input type="submit" value="Anlegen">
                </div>
            </div>
        </form>

       <!-- treeview-->
       <div class="treeview p1">
            {% for item in categories_income_tree %}
                {% if item.1 <= 3 %}
                    {% if item.2 %}
                    <div class="p1 tree-item tree{{item.1}} tree-ignore"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a>{{item.0}}</div>
                    {% else %}
                    <div class="p1 tree-item tree{{item.1}}"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> {{item.0}}</div>
                    {% endif %}
                {%else%}
                    {% if item.2 %}
                    <div class="p1 tree-item tree3 tree-ignore"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a>**{{item.0}}</div>
                    {% else %}
                     <div class="p1 tree-item tree3"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> **{{item.0}}</div>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- right box expense-->
    <div class="content-box flex-grow p1 m1r">
    <!-- headline-->
        <h2>Ausgaben</h2>
       <!-- insert form-->
        <form method="post">
            {% csrf_token %}
            <div><h4>Neue Ausgaben-Kategorie anlegen</h4></div>
            <div class="flex-column inputform m2b">
                <div class="flex-row center-h m1r p1">                
                   <div class="m1r"><label for="name">Name</label></div> 
                   <div class="align-right"> <input type="text" name="name_expense" placeholder="Name" required></div>
                </div>
                <div class="flex-row center-h m1r p1">
                   <div class="m1r"> <label for="parent">Überkategorie</label></div>
                   <div class="align-right"> <select name="parent" required>
                        <option value="0">Keine</option>
                        {% for category in categories_expense_select %}
                        <option value="{{category.id}}">{{category.name}}</option>
                        {% endfor %}
                        </select></div>
                </div>
                <div class="flex-row center-h m1r p1">
                   <div class="m1r"> <label for="ignore">In Statistik ignorieren</label></div>
                   <div class="align-right"> 
                        <input type="checkbox" name="ignore">
                    </div>
                </div>
                <div class="p1 align-right">
                    <input type="submit" value="Anlegen">
                </div>
            </div>
        </form>

       <!-- treeview-->
       <div class="treeview p1">
            {% for item in categories_expense_tree %}
                {% if item.1 <= 3 %}
                    {% if item.2 %}
                    <div class="p1 tree-item tree{{item.1}} tree-ignore"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> {{item.0}}</div>
                    {% else %}
                    <div class="p1 tree-item tree{{item.1}}"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> {{item.0}}</div>
                    {% endif %}
                {%else%}
                    {% if item.2 %}
                    <div class="p1 tree-item tree3 tree-ignore"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> **{{item.0}}</div>
                    {% else %}
                     <div class="p1 tree-item tree3"><a class="link_trash_treeview" href="deletecategory/{{item.0}}"><i class="fi-rr-trash"></i></a> **{{item.0}}</div>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}